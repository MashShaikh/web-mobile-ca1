<html>

<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
  <link href="card.css" rel="stylesheet" />
</head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<body>
  <div class="container-fluid">
    <div class="row rowOuter" id="sec-6">
    </div>
    <div class="moviePage" id="sec-7">
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous">
    </script>

  <script src="data.js"></script>

  <script>
    let selectedMovie = {
      id: '',
      title: '',
      desc: '',
      releaseDate: '',
      director: '',
      producer: '',
      rating: '',
      actors: '',
      genre: '',
      coverPic: '',
      images: '',
      price: '',
    }

    $(document).ready(() => {
      document.getElementById("sec-7").style.display = "none"
      let cards = ''
      data.movies.forEach((item) => {
        console.log(item.title + '/')
        cards +=
          '<div class="col colOuter">' +
          '<div class="card cardOuter" id=' +
          item.id +
          ' onmouseover="onMouseOver()" onmouseleave="onMouseLeave()" onclick="onClickMovie(this.id)">' +
          '<img class="card-img-top cardImgOuter" src=' +
          item.coverPic +
          ' alt="Card image cap"/>"' +
          '<div class="card-body cardBodyOuter">' +
          '<h5 class="card-title cardTitleOuter">' +
          item.title +
          '</h5>' +
          '</div>' +
          '</div>' +
          '</div>'
      })
      $('div.rowOuter').append(cards)
      console.log(cards)

    })
    function onMouseOver() {
      try {
        document.getElementById(event.target.id).style =
          'background-color: #d3d3d3;'
      } catch (error) { }
    }
    function onMouseLeave() {
      try {
        document.getElementById(event.target.id).style = 'background-color: white;'
      } catch (error) { }
    }

    //function to 
    // 1) render selected movie details
    // 2) hide movie list section
    // 3) un hide movie details section
    function onClickMovie(id) {

      // 2) hide movie list section
      document.getElementById("sec-6").style.display = "none"

      selectedMovie = data.movies.filter(item => item.id === id)[0]

      // 1) render selected movie details
      let movie = ''
      movie = '<table class="table table-dark" border = "1" style="align-items: center;">'
        + '<tr>'
        + '<td style=" width: 50%; text-align: justified;">'
        + '<p style="align-content: center;">'
        + selectedMovie.desc
        + '</p>'
        + '<p>'
        + '<table class="table table-dark">'
        + '<tr>'
        + '<td style="text-align: left;">'
        + 'Genre'
        + '</td>'
        + '<td style="text-align: right;">'
        + selectedMovie.genre
        + '</td>'
        + '</tr>'
        + '<tr>'
        + '<td style="text-align: left;">'
        + 'Directed By'
        + '</td>'
        + '<td style="text-align: right;">'
        + selectedMovie.director
        + '</td>'
        + '</tr>'
        + '<tr>'
        + '<td style="text-align: left;">'
        + 'Produced By'
        + '</td>'
        + '<td style="text-align: right;">'
        + selectedMovie.producer
        + '</td>'
        + '</tr>'
        + '<tr>'
        + '<td style="text-align: left;" >'
        + 'Released'
        + '</td >'
        + '<td style="text-align: right;" >'
        + selectedMovie.releaseDate
        + '</td >'
        + '</tr >'
        + '<tr>'
        + '<td style="text-align: left;" >'
        + 'Rating'
        + '</td >'
        + '<td style="text-align: right;" >'
        + selectedMovie.rating
        + '</td >'
        + '</tr >'
        + '<tr>'
        + '<td style="text-align: left;" >'
        + 'Price'
        + '</td >'
        + '<td style="text-align: right;" >'
        + selectedMovie.price
        + '</td >'
        + '</tr >'
        + '<tr>'
        + '<td style="text-align: left;"><button type="button" class="btn btn-outline-light" onclick="onClickBack()">Back</button></td>'
        + '<td style="text-align: right;"><button type="button" class="btn btn-outline-success">Select</button></td>'
        + '</tr>'
        + '</table>'
        + '</p >'
        + '</td >'
        + '<td style="width: 50%; text-align: center;">'
        + '<img src="' + selectedMovie.coverPic + '" alt="" style="min-height: 450px; align-items: center;"/>'
        + '</td>'
        + '</tr >'
        + '<tr>'
        + '<td colspan=100%>'
        + '<p style="font-size: 18px; font-weight: bold;">'
        + 'Stills'
        + '</p >'
        + '<div class="row" >'

      let actors = ''
      let movieImgs = ''

      selectedMovie.images.split(',').forEach((item) => {
        movieImgs +=
          '<div class="col-3" style="width: 220px; height: 280px; border: 2px white;">'
          + '<div class="card" style="background-color: #212529;">'
          + '<img class="card-img-top" src="'
          + item.toString()
          + '" alt=""'
          + 'style="width: auto; height: 220px;" />'
          + '<div class="card-body">'
          + '</div >'
          + '</div >'
          + '</div >'
      })
      movie += movieImgs
        + '</div >'
        + '</td >'
        + '</tr>'
        + '<tr>'
        + '<td colspan=100%>'
        + '<p style="font-size: 18px; font-weight: bold;">'
        + 'Cast'
        + '</p >'
        + '<div class="row" >'

      selectedMovie.actors.forEach((item) => {
        actors +=
          '<div class="col-3" style="width: 220px; height: 280px; border: 2px white;">'
          + '<div class="card" style="background-color: #212529;">'
          + '<img class="card-img-top" src="'
          + item.actorImg
          + '" alt="'
          + item.actorName
          + '"'
          + 'style="width: auto; height: 220px;" />'
          + '<div class="card-body" style="width: auto; height: 30px;" >'
          + '<p class="card-title" style="font-size: 15px;"> '
          + item.actorName
          + '</p >'
          + '</div >'
          + '</div >'
          + '</div >'

      })
      movie += actors
        + '</div >'
        + '</td >'
        + '</tr >'
        + '</table >'
      $("div.moviePage").append(movie)

      console.log(movie)
      // 3) un hide movie details section
      document.getElementById("sec-7").style.display = ""
    }


    //function to 
    // 1) un hide movie list section
    // 2) hide movie details section
    function onClickBack() {

      document.getElementById("sec-6").style.display = ""

      document.getElementById("sec-7").style.display = "none"

      $("div.moviePage").empty()

      selectedMovie = {
        id: '',
        title: '',
        desc: '',
        releaseDate: '',
        director: '',
        producer: '',
        rating: '',
        actors: '',
        genre: '',
        coverPic: '',
        images: '',
        price: '',
      }
    }
  </script>
</body>

</html>